<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Edytor</title>
    <script src="tinymce.min.js" referrerpolicy="origin"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
        }
        .tox-tinymce {
            height: 100% !important;
            width: 100% !important;
            border: none !important;
        }
    </style>
</head>
<body>

<textarea id="editor"></textarea>

<script>
    tinymce.init({
        selector: '#editor',
        plugins: 'lists link image table code help wordcount',
        toolbar: 'undo redo | formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | code',
        menubar: false,

        // inline: true,
        resize: false,
        branding: false,

        height: "100%",
        width: "100%",

        setup: function(editor) {
            // Funkcje do komunikacji z Flutterem
            window.getContent = function() {
                return editor.getContent();
            };

            window.setContent = function(content) {
                editor.setContent(content);
            };

            editor.on('init', function() {
                if (window.flutter_inappwebview) {
                    window.flutter_inappwebview.callHandler('onEditorReady');
                }
            });

            editor.on('keyup change', function() {
                if (window.flutter_inappwebview) {
                    window.flutter_inappwebview.callHandler('onContentChanged', editor.getContent());
                }
            });
        }
    });
</script>

</body>
</html>